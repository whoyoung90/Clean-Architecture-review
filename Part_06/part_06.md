# 6장 함수형 프로그래밍

자바 프로그램은 가변 변수를 사용하는데,<br />
클로저 프로그램에서는 이러한 가변 변수가 전혀 없다. 클로저에서는 x와 같은 변수가 한 번 초기화되면 절대로 변하지 않는다.
<br />
<br />

함수형 언어에서 `변수는 변경되지 않는다.`
<br />
<br />

## 💡<strong>불변성과 아키텍처</strong>

아키텍트는 왜 변수의 가변성을 염려하는가?<br />
경합(race) 조건, 교착상태(deadlock) 조건, 동시 업데이트 문제가 모두 가변 변수로 인해 발생하기 때문이다.
<br />
<br />

애플리케이션에서 마주치는 모든 문제는 가변 변수가 없다면 절대로 생기지 않는다.<br />
`불변성`은 실현 가능하겠지만 일종의 타협을 해야 한다.
<br />
<br />

## 💡<strong>가변성의 분리</strong>

불변성과 관련하여 가장 주요한 타협 중 하나는 서비스를 `가변 컴포넌트와 불변 컴포넌트로 분리`하는 일이다.
<br />
<br />

그리고 이렇게 분리하려면 가변 변수들을 보호하는 적절한 수단을 동원해 뒷받침 해야한다.<br />
흔히 <strong>"트랜잭션 메모리"</strong>와 같은 실천법을 사용하여 동시 업데이트와 경합 조건 문제로부터 가변 변수를 보호한다.
<br />
<br />

불변 컴포넌트에서는 순수하게 함수형 방식으로만 작업이 처리되며, 어떠한 가변 변수도 사용되지 않는다.<br />
불변 컴포넌트는 변수의 상태를 변경할 수 있는, 즉 순수 함수형 컴포넌트가 아닌 하나 이상의 다른 컴포넌트와 서로 통신한다.
<br />
<br />

## 💡<strong>이벤트 소싱</strong>

이벤트 소싱은 상태가 아닌 트랜잭션을 저장하자는 전략이다. 상태가 필요해지면 단순히 상태의 시작점부터 모든 트랜잭션을 처리한다.
<br />
<br />

데이터 저장소에서 삭제되거나 변경되는 것이 하나도 없게 된다. 결과적으로 애플리케이션은 CRUD가 아니라 그저 CR만 수행한다.<br />
또한 데이터 저장소에서 변경과 삭제가 전혀 발생하지 않으므로 동시 업데이트 문제 또한 일어나지 않는다.
<br />
<br />

저장공간과 처리 능력이 충분하면 애플리케이션이 완전한 불변성을 갖도록 만들 수 있고, 따라서 완전한 함수형으로 만들 수 있다.<br />
`소스 코드 버전 관리 시스템이 정확히 이 방식으로 동작한다는 사실!`
<br />
<br />

## 💡<strong>결론</strong>

구조적 프로그래밍, 객체 지향 프로그래밍, 함수형 프로그래밍, 각 패러다임은 우리가 코드를 작성하는 방식의 형태를 한정시킨다.<br />
우리가 배운것은 `해서는 안되는 것`에 대해서다.<br />
즉, 소프트웨어는 급격히 발전하는 기술이 아니라는 진실과 마주하게 된다.
<br />
<br />

도구는 달라졌고 하드웨어도 변했지만, 소프트웨어의 핵심은 여전히 그대로다.<br />
소프트웨어, 즉 컴퓨터 프로그램은 순차, 분기, 반복, 참조로 구성되며 그 이상 그이하도 아니다.
